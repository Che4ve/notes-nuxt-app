import{o,c as n,a as e,m as x,r as g,n as z,p as G,b as h,u as _,F as k,q as N,t as b,s as V,_ as $,v as A,x as j,f as I,g as U,y as M,z as F,A as H,B as J,w as C,T as D,C as K,D as O,E as T,G as P}from"./CdW2Co5G.js";import{u as q,C as Q}from"./CGvO9Bwq.js";const W={xmlns:"http://www.w3.org/2000/svg",width:"800",height:"800",fill:"none",viewBox:"0 0 16 16"};function X(r,t){return o(),n("svg",W,t[0]||(t[0]=[e("g",{fill:"#000"},[e("path",{d:"M4 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0M10 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0M14 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4"})],-1)]))}const Y={render:X},Z={class:"select-options"},ee=["onClick"],te=x({__name:"CustomSelect",props:{options:{type:Array,required:!1}},setup(r){const t=g(),a=g(!1),p=l=>{a.value&&t.value&&!t.value.contains(l.target)&&(a.value=!a.value)};return z(()=>{document.addEventListener("click",p)}),G(()=>{document.removeEventListener("click",p)}),(l,m)=>(o(),n("div",{class:V(["custom-select",a.value?"active":""]),ref_key:"elementRef",ref:t},[e("button",{class:"select-button",onClick:m[0]||(m[0]=()=>{a.value=!a.value})},[h(_(Y))]),e("ul",Z,[(o(!0),n(k,null,N(r.options,s=>(o(),n("li",{onClick:()=>{s.handler(),a.value=!a.value}},b(s.label),9,ee))),256))])],2))}}),oe=$(te,[["__scopeId","data-v-ed515d99"]]),se={class:"note-card"},ne={class:"note-card__header"},ae={class:"note-title"},le={class:"note-card__todo-list"},de=x({__name:"NoteCard",props:{data:{type:Object,required:!0}},setup(r){const t=r,a=q(),{removeNote:p}=a,l=g(!1),m=()=>{l.value=!0},s=()=>{j(`/notes/${t.data.id}`)},w=()=>{setTimeout(()=>{p(t.data.id)},100),l.value=!1},v=()=>{l.value=!1},i=A([{label:"Редактировать",handler:s},{label:"Поделиться",handler:()=>{console.log("Поделиться")}},{label:"Удалить",handler:m}]);return(E,y)=>(o(),n("div",se,[e("div",ne,[e("h3",ae,b(r.data.title),1),h(oe,{options:i},null,8,["options"])]),y[0]||(y[0]=e("h4",null,b("TODO"),-1)),e("ul",le,[(o(!0),n(k,null,N(r.data.todoList,f=>(o(),n("li",{class:V({completed:f.isCompleted})},[e("span",null,b(f.text),1)],2))),256))]),h(Q,{show:l.value,title:"Удалить заметку",message:"Вы уверены, что хотите удалить эту заметку?",onConfirm:w,onCancel:v},null,8,["show"])]))}}),ie=$(de,[["__scopeId","data-v-c2b95482"]]),re={class:"modal-content"},ce={class:"modal-header"},ue={class:"modal-body"},me={class:"modal-footer"},ve=x({__name:"CustomModal",props:{show:{type:Boolean,required:!0,default:!1}},emits:["update:show"],setup(r,{emit:t}){const a=r,p=t,l=()=>{p("update:show",!1)},m=s=>{s.key==="Escape"&&l()};return I(()=>a.show,s=>{s?window.addEventListener("keydown",m):window.removeEventListener("keydown",m)}),U(()=>{window.removeEventListener("keydown",m)}),(s,w)=>r.show?(o(),n("div",{key:0,class:"modal-overlay",onClick:F(l,["self"])},[e("div",re,[e("div",ce,[M(s.$slots,"header",{},void 0,!0),e("button",{class:"close-button",onClick:l},"×")]),e("div",ue,[M(s.$slots,"body",{},void 0,!0)]),e("div",me,[M(s.$slots,"footer",{},void 0,!0)])])])):H("",!0)}}),pe=$(ve,[["__scopeId","data-v-f4ca8092"]]),_e={xmlns:"http://www.w3.org/2000/svg",width:"800",height:"800",fill:"none",viewBox:"0 0 24 24"};function he(r,t){return o(),n("svg",_e,t[0]||(t[0]=[e("path",{d:"M15 12h-3m0 0H9m3 0V9m0 3v3M22 12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12s0-7.071 1.464-8.536C4.93 2 7.286 2 12 2s7.071 0 8.535 1.464c.974.974 1.3 2.343 1.41 4.536"},null,-1)]))}const we={render:he},fe=["onUpdate:modelValue"],Ce=["onClick"],ke={key:"todo-list__add-button"},ye=x({__name:"index",setup(r){const t=q(),{notes:a}=J(t),{getNoteById:p,addNote:l,removeNote:m}=t,s={title:"Новая заметка",todoList:[]},w=d=>JSON.parse(JSON.stringify(d)),v=g(!1),i=A(w(s)),E=()=>{console.log("OPENING MODAL"),v.value=!0},y=()=>{const d={id:Date.now().toString(),text:"",isCompleted:!1,createdAt:new Date};i.todoList.push(d)},f=()=>{i.todoList=[...i.todoList].filter(d=>d.text.length>0),l({id:Date.now().toString(),...i}),v.value=!1,S()},S=()=>{Object.assign(i,w(s))},R=d=>{i.todoList=[...i.todoList].filter(u=>u.id!==d)},L=d=>{d.key==="Enter"&&v.value&&(d.preventDefault(),f())};return I(v,d=>{d?window.addEventListener("keydown",L):window.removeEventListener("keydown",L)}),U(()=>{window.removeEventListener("keydown",L)}),(d,u)=>(o(),n(k,null,[h(D,{name:"card-board",tag:"div",class:"card-board"},{default:C(()=>[(o(!0),n(k,null,N(_(a),c=>(o(),P(ie,{key:`note-${c.id}`,data:c},null,8,["data"]))),128)),(o(),n("button",{class:"add-note-button",key:"add-note-button",onClick:E},[h(_(we)),u[2]||(u[2]=e("span",null,"Добавить заметку",-1))]))]),_:1}),h(pe,{show:_(v),"onUpdate:show":u[1]||(u[1]=c=>K(v)?v.value=c:null)},{header:C(()=>[O(e("input",{type:"text",placeholder:"Название","onUpdate:modelValue":u[0]||(u[0]=c=>_(i).title=c)},null,512),[[T,_(i).title,void 0,{trim:!0}]])]),body:C(()=>[u[3]||(u[3]=e("span",null,"Список дел",-1)),h(D,{name:"todo-list",tag:"ul"},{default:C(()=>[(o(!0),n(k,null,N(_(i).todoList,c=>(o(),n("li",{key:c.id},[O(e("input",{type:"text",placeholder:"Название","onUpdate:modelValue":B=>c.text=B},null,8,fe),[[T,c.text,void 0,{trim:!0}]]),e("button",{class:"todo-list__delete-button",onClick:B=>R(c.id)}," × ",8,Ce)]))),128)),(o(),n("li",ke,[e("button",{class:"todo-list__add-button",onClick:y}," + Добавить дело ")]))]),_:1})]),footer:C(()=>[e("button",{onClick:S},"Очистить"),e("button",{onClick:f},"Сохранить")]),_:1},8,["show"])],64))}}),Ne=$(ye,[["__scopeId","data-v-a36d678d"]]);export{Ne as default};
